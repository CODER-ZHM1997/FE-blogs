本文档主要书写一些

# 问题

数据库有哪些类型？

- 按是否有序分：关系型数据库、非关系型数据库
- 按存放位置分：本地数据库、分布式数据库

关系与非关系型数据库的区别？
：存储方式不同，关系型数据库是以表格的形式存储数据，非关系型数据库是以键值对的形式存储数据。

# 表如何设计

- 字段要全面
  - 先把关键的字段设计好，然后再去补充一些其它的字段
- 表示类型的字段，一般都是用数字来表示，比如说0表示禁用，1表示启用，这样的话，就可以通过数字来进行查询了
- 一般是从1开始，除非是开关类型的
- 对于可能扩展的东西，要保留扩展性
  - 比如sort顺序编号，应该设置为1、10、20、30，而不是1、2、3之类的这么紧凑的，这样后面方便的就能插入其他的相邻的元素
- 数据存放
  - 有些东西可以放1个表里，也可以放2个表里
    - 比如设备分组的，可以直接把分组与设备信息放1个表里，也可以分成2个表

子节点标记父节点id，还是父节点保存子节点id？

- 推荐：子节点标记父节点id，这样可以方便查询
- 父节点保存子节点id
  - 查询的时候就要用到$in，这样就会影响性能
  - 子节点删除的收，父节点也要删除子节点id，这样就会影响性能

如果一条记录内容很多

- 可以考虑拆分成多个表，比如说一个表只存储基本信息，另一个表存储详细信息，如product、product_info

做加法

- 名称：name，很多时候都需要名称来找的，不然记录一多，你很难翻得到的
- 状态：state，比如启用、禁用
- 类型：type，比如会议也有很多类型：常规、紧急
- 时间：time，时间点和时间段
- 备注：remark，这个也是常用的字段
- 范围相关属性，有一个范围就要加个字段，比如所属项目，所属阶段，
- 删除状态：delete_status，0表示未删除，1表示已删除，比较重要的表就要有这个字段
  - 比如资源表
- 关联对象：人或者是物的ID
- 其它属性的类型
  - 比如联系方式类型有qq、wechat、phone

做减法

- 某些id不需要绑定，比如任务表不需要加项目id，因为项目表里面会存储任务id
  - 正向、反向查询
  - 但是这样设计有个问题，不能根据任务id来查询项目，因为没有保存所属项目id
- 不用自己加的
  - 某些字段不需要设计，比如创建时间、更新时间、创建人、更新人，这些字段都是可以通过代码来实现的，不需要设计到表中
  - 有些字段是mongodb自己提供的，比如create_at
- 有些表跟已有的表差不多，可以考虑耦合
- 并非所有东西都支持修改，比如资源就不支持在线修改，他只能重新上传一个或者是删除
- 有些字段没必要拆分2个，比如文件名和系统内的文件名，可以考虑合并为一个字段
  - 比如
- 总价字段要不要存？
  - 因为已经有单价和数量了
- 看下有些字段功能是不是重复了？
  - 重复的要去掉一个或一些

做确认

- 比如分类有哪些，是按这些来分类的吗？还是只是备注？
  - 一定要判断他们给的模板是特例还是通用的，给的特例就是坑啊
- 值要不要唯一？
  - 比如有些场景下名称要唯一，有些又不要求
- 某一时刻只能存在一个，还是可以存在多个？一般是可以同时存在多个的
  - 比如某个产品关联的相关文档
    - 比如专利书、说明书
- 要不要分表？
  - 比如产品表和产品详情表？
